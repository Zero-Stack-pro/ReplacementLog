# ‚úÖ Production Deployment —É—Å–ø–µ—à–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!

## –°—Ç–∞—Ç—É—Å

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –≤ production —Ä–µ–∂–∏–º–µ —Å Gunicorn!

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- ‚úÖ **WSGI —Å–µ—Ä–≤–µ—Ä**: Gunicorn (–≤–º–µ—Å—Ç–æ runserver)
- ‚úÖ **Workers**: 5 –≤–æ—Ä–∫–µ—Ä–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ)
- ‚úÖ **–ü–æ—Ä—Ç**: 8000 (—Å–ª—É—à–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö)
- ‚úÖ **Systemd**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `/var/log/`
- ‚úÖ **Production settings**: –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ü—Ä–æ—Ü–µ—Å—Å—ã

```
Master process: PID 2463207
Worker processes: 4 –≤–æ—Ä–∫–µ—Ä–∞
–í—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: 5
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

- **–ü–∞–º—è—Ç—å**: ~48MB (peak)
- **CPU**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **–°—Ç–∞—Ç—É—Å**: active (running)

## –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. Gunicorn Configuration
- Workers: `(2 x CPU cores) + 1` = 5 –≤–æ—Ä–∫–µ—Ä–æ–≤
- Threads: 2 –Ω–∞ –≤–æ—Ä–∫–µ—Ä
- Timeout: 120 —Å–µ–∫—É–Ω–¥
- Max requests: 1000 (—Å jitter 100)
- Preload app: –î–∞

### 2. Production Settings
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (base, development, production)
- Connection pooling –¥–ª—è –ë–î (CONN_MAX_AGE=600)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

### 3. Systemd Service
- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ systemctl

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status replacementlog

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart replacementlog

# –õ–æ–≥–∏
sudo journalctl -u replacementlog -f

# –õ–æ–≥–∏ Gunicorn
tail -f /var/log/replacementlog-access.log
tail -f /var/log/replacementlog-error.log
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –Ω–∞ 30-50%
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ 20-40%
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
- ‚úÖ –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–æ–≤

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://10.45.20.40:8000`

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **Nginx –∫–∞–∫ reverse proxy** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
2. **HTTPS/SSL** (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–º–µ–Ω)
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (Prometheus, Grafana)
4. **Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

## –í–∞–∂–Ω–æ

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production —Ä–µ–∂–∏–º–µ
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ systemd
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `/var/log/replacementlog-*.log`
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

üéâ **Production deployment —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!**

